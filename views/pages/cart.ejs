<%- include('../partials/header') %>

<h1>Your Cart</h1>

<% if (cartItems.length === 0) { %>
    <p>Your cart is empty.</p>
<% } else { %>
    <div class="cart-items">
        <% cartItems.forEach(item => { %>
            <div class="cart-item">
                <img src="<%= item.imageUrl %>" alt="<%= item.name %>">
                <div class="cart-item-details">
                    <h3><%= item.name %></h3>
                    <p>Price: $<%= item.price %></p>
                    
                    <form action="/cart/update-quantity" method="POST" class="cart-quantity-form">
                        <input type="hidden" name="productId" value="<%= item.product_id %>">
                        <button type="submit" name="action" value="decrease" class="quantity-btn">-</button>
                        <span><%= item.quantity %></span>
                        <button type="submit" name="action" value="increase" class="quantity-btn">+</button>
                    </form>
                </div>
                
                <form action="/cart/remove" method="POST" class="cart-remove-form">
                    <input type="hidden" name="productId" value="<%= item.product_id %>">
                    <button type="submit" class="delete-button">Remove</button>
                </form>
            </div>
        <% }) %>
    </div>
    <div class="cart-total">
        <h3>Total: $<%= total %></h3>
        <a href="/checkout" class="checkout-button">Proceed to Checkout</a>
    </div>
<% } %>

<%- include('../partials/footer') %>